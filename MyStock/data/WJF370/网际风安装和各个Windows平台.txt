关于网际风安装使用和各个Windows平台的问题

1、网际风客户端和常见的分析家、飞狐软件都是32位的应用，可以在Win9x-Win8的所有平台使用，推荐在32位的Windows平台上使用，如果使用64位的平台，需要注意看后续的注意事项。

2、网际风和分析家、飞狐是2001年开发设计的软件，主要架构十几年来没有什么变化，遵从的通视规范也是1998年-2003年之间制定的，是适应当时的操作系统，跟现在的系统不太适应，后面详述。

3、网际风核心文件只有3个：
   Stock.DLL（负责跟用户应用层交互数据）
   WJFMain.EXE（负责跟网际风服务器连接和收发数据并将数据转发给STOCK.DLL）
   WJFMain.INI（网际风参数配置文件，首次运行以后自动生成）

网际风自己写了一个安装软件，该安装软件主要做2个工作：
   1、将Stock.DLL和WJFMain.EXE写入到系统文件夹，一般是C:\windows\system32。
   2、修改注册表的通视规范键值，将Driver指向网际风的驱动程序 STOCK.DLL。
      [HKEY_LOCAL_MACHINE\SOFTWARE\StockDrv]
      "Driver"="stock.dll"
      "SCDriver"="stock.dll"

这2个工作在2003年的Win9x、Win2000、WinXP、Win2003平台都没有问题，因为那个时候的Windows系统默认都是管理员权限登录的，系统也是盗版居多，盗版的Win系统都是默认以管理员权限登录，因为这样使用最方便，安全性不是那么重要。管理员权限登录可以随便往system32文件夹写入驱动文件，修改注册表也没有障碍。

到了Vista、Win7、Win8、Win2008这些平台的时候，如果使用正版的Win系统，默认登录系统的是一般用户，一般用户是没有权限往system32写入文件的，也无法修改上述注册表键值，所以要使用网际风自带的安装程序，都需要使用右键菜单“以管理员身份运行”，否则会出错无法安装。使用分析家飞狐时，也需要使用右键菜单“以管理员身份运行”，否则无法读取注册表驱动键值和发现网际风DLL驱动（会报告未发现驱动），一般在快捷方式的右键属性的兼容选项中选中“以管理员身份运行”来解决这个问题，这个不方便的原因的新的Win系统加强了安全性牺牲了便利性造成的，不是网际风的过错。

现在很多盗版的Win7，安装后也是默认管理员权限登录，这样就跟WinXP一样好用，不需要上述“以管理员身份运行”就可以正常使用，所以Win7看版本，不能一概而论，盗版比正版好使。

4、正是因为有往system32写入DLL驱动和连接网络的动作，所以很多的防火墙软件都把网际风归为风险软件给予删除，作为一个小众软件很多防火墙不认识网际风也是正常的，我们也没有足够的钱去找各个防火墙、杀毒软件厂家交纳买路钱，所以遇到误报的情况，请加入信任名单（白名单）即可，但是有些软件如卡巴斯基是没有白名单功能的，他总是霸道的把网际风强行删除，没有给用户选择权，所以对于这类用户，只能卸载卡巴斯基，换用其他杀毒软件，才可以正常使用网际风和飞狐（也会被卡巴删除）。

5、网际风为什么要往system32写入DLL，主要是基于2点：system32是所有不带路径DLL的默认搜索路径，网际风可以同时驱动多个分析软件，放到这里可以被各个应用层方便的调用；还有几个古老的分析软件，只会傻傻去system32去调用STOCK.DLL，不会去读取注册表键值，为了照顾这些老用户，所以一直没有改安装路径。既然往system32写入这么多禁忌，那我可不可以不放到这里呢？当然可以，对于Win7以上的平台，特别是64位的平台，我们强烈建议用户将网际风的3个文件放到其他文件夹，特别是自己开发软件的用户，可以放到跟用户的应用程序同一个文件夹里面，这样打包发布时可以直接打进去，不管放到哪里，你调用DLL文件时，注意路径即可，如果是当前文件夹，就没有必要加路径，同时system32文件夹下面的网际风记得删除，免得在系统中存在多个网际风客户端引起混淆。

如果用的是飞狐软件，也可以将网际风的3个文件直接放到 D:\FoxTrader 文件夹，就是跟飞狐的主程序同一个文件夹。总之，使用手动安装驱动的用户，可以将网际风的3个文件放到任意地方，只要你自己知道在哪里就可以，如果要用的分析软件遵从通视规范，将注册表相应键值路径改为上述路径即可。

6、如果是64为的Win平台，除了上述的system32读写权限问题，还有注册表问题，由于X64平台将32位应用（这个改动是对所有32位应用，不仅仅是网际风）的注册表项“HKEY_LOCAL_MACHINE\SOFTWARE”移到了“HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node”以下，所以分析家，飞狐的注册表均要使用X64专用的注册表文件，网际风的通视规范键值也要使用如下64位专用注册表，否则无法发现驱动。
[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\StockDrv]
"Driver"="stock.dll"
"SCDriver"="stock.dll"

对于64位平台只使用一种分析软件或者自己开发软件的用户，我们强烈建议你将网际风的3个文件放到跟分析软件主程序同一个文件夹的位置，注册表使用不带路径的DLL即可，或者不去读取注册表键值。

7、Win8和Win2008遵从相同的规则，如果放入system32和使用通视规范的注册表，则必须使用“以管理员身份运行”来获取权限。如果自己开发软件，不建议放在上述文件夹，也不必要使用注册表。
